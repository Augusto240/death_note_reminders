<!DOCTYPE html>
<html>
  <head>
    <title>Death Note Reminders</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag "application", "death_note", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAB1UlEQVRYR+2WTUsCURSG32tppLXoD0QQtK1VQdCiVUFEQUS7foD5EwLbtHNR21YR7VpZ0MYvnDdm4Doz3rmjoDA4q7nnnvOc95z3fAzxz8b+mR8JIAqBJELJwH8wYGbLAFYBnEm6jEo8FoCZbQDoBZAHkJX0EBVEZABmdgJgStIbgA1J+2GmZjYPYBdA9iPnLmk5LBcmQnMAZwBWAJwCWJPEfn8zszkAewCEOwC3kjZDc6OejwSQb1sE0AXgDcC6pINKADN7ltRrZikA5wCWJN3XA+EHBGB9AK4BrEo6KgcIYs7rHLEtaasWY7+svADoSLqsClAs+1HSQrUGTCenPE5TOizpxHMCaNTMCgD6Ja1XMlXOjJktAjgAsC3poFYzvifMrB3AnqQJz8zM2HwOwJikj8BsYKbE3zQJQMM3SZka6R31uCUAJwD4/YbmIgOUhFtaAabTTzPj/n5JuiPCTQEwM3rKSaBD0qNX22YBMDi3LLdt75LozN8+KnVcF4CZDQLgPk95TSX1+GVpBIBnws1s2n0cAeBCQ2OD/Ek5JIkbU2gbARCe3QUwIek9FACNuFKdO9WlJF4wdVuYuRHHBbL+FACXOJTUCIBIkdcbSIRiBrIxIy/ybDqaJQAAAABJRU5ErkJggg==" />
  </head>

  <body>
    <div class="container">
      <div class="header">
        <h1>Death Note</h1>
        <div class="subtitle">The human whose name is written in this note shall die...</div>
        <div class="nav">
          <%= link_to "All Names", reminders_path %>
          <%= link_to "Add New Name", new_reminder_path %>
          <%= link_to "Overdue", reminders_path(filter: "overdue") %>
          <%= link_to "Completed", reminders_path(filter: "completed") %>
          <%= link_to "About", about_path %>
        </div>
      </div>
      
      <% if notice %>
        <div class="notice"><%= notice %></div>
      <% end %>
      
      <% death_note_quotes = [
        "This world is rotten, and those who are making it rot deserve to die.",
        "I'll take a potato chip... AND EAT IT!",
        "The human whose name is written in this note shall die.",
        "I am Justice!",
        "In this world, there are very few people who actually trust each other.",
        "Humans aren't made perfectly. Everyone lies. Even so... I've been careful not to tell lies that hurt others.",
        "The real evil is the power to kill people. Someone who finds himself with that power is cursed. No matter how you use it, anything obtained by killing people can never bring true happiness.",
        "If you can't win the game, if you can't solve the puzzle, you're nothing but a loser."
      ] %>
      
      <div class="death-counter">
        <%= Reminder.where(status: true).count %> executions completed
      </div>
      
      <div class="search-form">
        <%= form_with url: search_reminders_path, method: :get, local: true do |form| %>
          <%= form.text_field :query, placeholder: "Search for a name..." %>
          <%= form.submit "Search", class: "btn" %>
        <% end %>
      </div>
      
      <%= yield %>
      
      <div class="death-quote">
        "<%= death_note_quotes.sample %>"
      </div>
    </div>
    
    <script>
      document.addEventListener('turbo:load', function() {
        // Função para tocar o som ao marcar como executado
        const executeButtons = document.querySelectorAll('.btn-danger');
        executeButtons.forEach(button => {
          if (button.textContent.trim() === 'Execute') {
            button.addEventListener('click', function(e) {
              const reminder = this.closest('.reminder');
              if (reminder) {
                reminder.classList.add('execute-animation');
              }
            });
          }
        });
      });
    </script>
  </body>
</html>